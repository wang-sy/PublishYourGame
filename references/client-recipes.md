# Client Recipes (Python, curl, Node, PowerShell)

Use this reference when users ask for concrete runnable commands by client/runtime.

## 1) Python CLI (no third-party dependency)

Upload zip:

```bash
python3 scripts/publish_game.py upload-zip \
  --base-url http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000 \
  --zip ./my_game.zip \
  --title "My Game" \
  --description "Generated by AI"
```

Publish from directory:

```bash
python3 scripts/publish_game.py publish-files \
  --base-url http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000 \
  --dir ./my_game_project \
  --title "My Game"
```

## 2) Node.js CLI (no third-party dependency)

Upload zip:

```bash
node scripts/publish_game_node.mjs upload-zip \
  --base-url http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000 \
  --zip ./my_game.zip \
  --title "My Game"
```

Publish from directory:

```bash
node scripts/publish_game_node.mjs publish-files \
  --base-url http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000 \
  --dir ./my_game_project \
  --title "My Game" \
  --prefer-text
```

## 3) curl recipes

### 3.1 Upload zip with /api/upload (Linux/macOS/Git Bash)

```bash
curl -sS -X POST "http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000/api/upload" \
  -F "title=My Game" \
  -F "description=Generated by AI" \
  -F "file=@./my_game.zip;type=application/zip"
```

### 3.2 Upload zip with /api/upload (Windows PowerShell, force real curl)

```powershell
curl.exe -sS -X POST "http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000/api/upload" `
  -F "title=My Game" `
  -F "description=Generated by AI" `
  -F "file=@C:/path/to/my_game.zip;type=application/zip"
```

### 3.3 Publish files with /api/publish using payload file

Create `publish_payload.json` with schema:

```json
{
  "title": "My Game",
  "description": "optional",
  "files": [
    {
      "path": "index.html",
      "content": "<html><body>Hello</body></html>"
    },
    {
      "path": "assets/logo.png",
      "contentBase64": "iVBORw0KGgo..."
    }
  ]
}
```

Send request:

```bash
curl -sS -X POST "http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000/api/publish" \
  -H "Content-Type: application/json" \
  --data-binary @publish_payload.json
```

## 4) PowerShell native recipes

### 4.1 Upload zip via Invoke-RestMethod

```powershell
$baseUrl = "http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000"
$form = @{
  title = "My Game"
  description = "Generated by AI"
  file = Get-Item "C:\\path\\to\\my_game.zip"
}
Invoke-RestMethod -Method Post -Uri "$baseUrl/api/upload" -Form $form
```

### 4.2 Publish files via payload JSON

```powershell
$baseUrl = "http://nlb-8rcqh9faj37iiwegkc.ap-southeast-1.nlb.aliyuncsslbintl.com:3000"
$payload = Get-Content .\publish_payload.json -Raw
Invoke-RestMethod -Method Post -Uri "$baseUrl/api/publish" -ContentType "application/json" -Body $payload
```

## 5) Client selection guideline

- Need highest portability and directory publish automation: Python CLI.
- User has Node but not Python: Node CLI.
- User explicitly requests command-line only and already has zip: curl `/api/upload`.
- Windows operations users: PowerShell native recipe or `curl.exe`.
